<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>读[GO语言编程] | mingzi.li blog</title><meta property="og:type" content="website"><meta property="og:title" content="读[GO语言编程]"><meta property="og:url" content="http://qiaomingzi.github.io/%E8%AF%BBgo%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/"><meta property="og:locale" content="en_GB"><meta property="og:image" content="http://qiaomingzi.github.io/images/og-image.png"><link rel=canonical href=http://qiaomingzi.github.io/%E8%AF%BBgo%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/><meta name=twitter:card content="summary"><meta name=twitter:site content="@p4lm"><link rel=stylesheet type=text/css href=/styles/main-bundle.108386b285ad502399f3a8ab890a333c177e59d922733a408892e466a7a87f70d143ace3585f247b62a75a780bd7bcff68b60fc6760b5ae1414e52c78fe708e7.css integrity media="screen, tv, projection"><link rel=stylesheet type=text/css href=/styles/print-bundle.f3d1ea3e2e864e24f7a26ff871aef6875b8e6246aad31fa6e63fdc9c91c629f6b4cdd7dca9beb3949f8b61a0db4c6fe8ec1bfc44ccf3a2cd9a91ea8e9eb20d44.css integrity media=print><link rel=preload as=font href=/fonts/muli1.woff2 type=font/woff2 crossorigin=anonymous><link rel=preload as=font href=/fonts/muli2.woff2 type=font/woff2 crossorigin=anonymous><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#04396c><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.83.1"><svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="icon-arrow-right" viewBox="0 0 32 32"><path d="M19.414 27.414l10-10c.781-.781.781-2.047.0-2.828l-10-10c-.781-.781-2.047-.781-2.828.0s-.781 2.047.0 2.828L23.172 14H4c-1.105.0-2 .895-2 2s.895 2 2 2h19.172l-6.586 6.586c-.39.39-.586.902-.586 1.414s.195 1.024.586 1.414c.781.781 2.047.781 2.828.0z"/></symbol><symbol id="icon-arrow-left" viewBox="0 0 32 32"><path d="M12.586 27.414l-10-10c-.781-.781-.781-2.047.0-2.828l10-10c.781-.781 2.047-.781 2.828.0s.781 2.047.0 2.828L8.828 14H28c1.105.0 2 .895 2 2s-.895 2-2 2H8.828l6.586 6.586c.39.39.586.902.586 1.414s-.195 1.024-.586 1.414c-.781.781-2.047.781-2.828.0z"/></symbol><symbol id="icon-calendar" viewBox="0 0 32 32"><path d="M27.2 4.8h-1.6V8h-4.8V4.8h-9.6V8H6.4V4.8H4.8C3.038 4.8 1.6 6.24 1.6 8v19.2c0 1.76 1.438 3.2 3.2 3.2h22.4c1.76.0 3.2-1.44 3.2-3.2V8c0-1.76-1.44-3.2-3.2-3.2zm0 22.4H4.8V14.4h22.4v12.8zM10.4 1.6H7.2v5.6h3.2V1.6zm14.4.0h-3.2v5.6h3.2V1.6z"/></symbol><symbol id="icon-expand" viewBox="0 0 32 32"><path d="M11.179 17.579l-4.69 4.85-3.29-3.886v10.258h10.219l-3.888-3.33 4.848-4.691-3.2-3.2zM18.581 3.2l3.888 3.33-4.848 4.691 3.2 3.2 4.69-4.85 3.29 3.886V3.199H18.582z"/></symbol><symbol id="icon-collapse" viewBox="0 0 32 32"><path d="M6.56 22.56 1.6 27.2l3.2 3.2 4.64-4.96 3.36 3.36v-9.6H3.2l3.36 3.36zM30.4 4.8l-3.2-3.2-4.64 4.96L19.2 3.2v9.6h9.6l-3.36-3.36L30.4 4.8z"/></symbol><symbol id="icon-bubble" viewBox="0 0 32 32"><path d="M16 2c8.837.0 16 5.82 16 13s-7.163 13-16 13c-.849.0-1.682-.054-2.495-.158C10.068 31.279 5.966 31.895 2 31.986v-.841C4.142 30.096 6 28.184 6 26c0-.305-.024-.604-.068-.897-3.619-2.383-5.932-6.024-5.932-10.103.0-7.18 7.163-13 16-13z"/></symbol><symbol id="icon-folder" viewBox="0 0 32 32"><path d="M29.448 7.678C29.27 6.974 28.4 6.4 27.512 6.4H16.61c-.886.0-2.128-.509-2.755-1.131l-.954-.941c-.627-.622-1.867-1.128-2.754-1.128H4.939c-.888.0-1.694.715-1.792 1.59L2.68 9.6h27.09l-.322-1.922zM31.059 11.2h-30.118c-.547.0-.976.47-.923 1.016l1.477 15.47c.059.63.59 1.114 1.226 1.114h26.56c.635.0 1.165-.483 1.226-1.114l1.477-15.47c.053-.546-.376-1.016-.923-1.016z"/></symbol><symbol id="icon-tag" viewBox="0 0 32 32"><path d="M31.021.648c-.178-.502-.726-.768-1.23-.594s-.77.728-.595 1.232c1.486 4.272-1.464 7.462-3.714 9.171l-.909-1.302c-.306-.437-.989-.8-1.52-.806l-5.101.022c-.531-.01-1.32.234-1.755.541l-15.03 10.539c-.728.512-.904 1.515-.395 2.246l6.83 9.773c.512.728 1.33.64 2.059.131l15.03-10.541c.432-.306.931-.965 1.107-1.469l1.597-5.032c.176-.502.069-1.269-.237-1.706l-.554-.794c3.021-2.315 6.157-6.406 4.416-11.413zM24.027 15.621c-1.163.816-2.77.531-3.584-.634-.818-1.168-.533-2.774.632-3.594.925-.648 2.125-.602 2.989.027-.435.262-.734.416-.79.44-.482.229-.688.806-.461 1.288.166.35.514.557.875.557.138.0.278-.032.411-.094.31-.147.643-.322.99-.528.155.95-.222 1.947-1.062 2.538z"/></symbol><symbol id="icon-circle-with-cross" viewBox="0 0 32 32"><title>Close (Esc)</title><path d="M16 2.56C8.578 2.56 2.56 8.578 2.56 16S8.578 29.44 16 29.44 29.44 23.422 29.44 16 23.422 2.56 16 2.56zm7.662 18.338-2.766 2.766L16 18.766l-4.898 4.896-2.766-2.766L13.235 16l-4.898-4.898 2.766-2.765 4.896 4.896 4.898-4.898 2.766 2.766-4.899 4.898 4.898 4.898z"/></symbol></defs></svg></head><body x-data=window.blog :class="{ 'modal-open': isModalOpen, 'keyboard-navigation' : keyboardNavigation }" @mouseup="keyboardNavigation = false" @keydown.tab="keyboardNavigation = true" @keydown.escape=closeModals()><script>try{const a=window.localStorage.getItem('theme');a==='dark'&&document.querySelector('body').classList.add('dark'),a==='light'&&document.querySelector('body').classList.add('light')}catch(a){}</script><link rel=stylesheet type=text/css href=/styles/post-bundle.min.a3c415b51dea409e064708f705f91702ddddb4aaf1c7522073113ac5c6941f198ce5f39ea63cfaf21674b905146c1bdf3eeb0eaa41d22b9d013117c9bb72d81e.css integrity="sha512-o8QVtR3qQJ4GRwj3BfkXAt3dtKrxx1IgcxE6xcaUHxmM5fOepjz68hZ0uQUUbBvfPusOqkHSK50BMRfJu3LYHg==" media="screen, tv, projection"><div id=page-wrapper><header><svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="icon-home" viewBox="0 0 32 32"><path d="M32 18.451 16 6.031.0 18.451v-5.064l16-12.42 16 12.42zM28 18v12h-8v-8h-8v8H4V18l12-9z"/></symbol><symbol id="icon-user" viewBox="0 0 32 32"><path d="M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432.0-4.971.0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649C7.216 22.637 2 25.97 2 30h28c0-4.03-5.216-7.364-12-7.918z"/></symbol><symbol id="icon-search" viewBox="0 0 32 32"><path d="M31.008 27.231l-7.58-6.447c-.784-.705-1.622-1.029-2.299-.998 1.789-2.096 2.87-4.815 2.87-7.787.0-6.627-5.373-12-12-12s-12 5.373-12 12 5.373 12 12 12c2.972.0 5.691-1.081 7.787-2.87-.031.677.293 1.515.998 2.299l6.447 7.58c1.104 1.226 2.907 1.33 4.007.23s.997-2.903-.23-4.007zM12 20c-4.418.0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z"/></symbol></defs></svg><div class=header-content @click.away=menu.close()><div class=site-title>mingzi.li blog<span style=font-size:.5rem;margin-top:20px>&nbsp;&nbsp;行到水穷处，坐看风云起</span></div><div class=theme-switcher :class="{'has-javascript': true}"><div class=switch><input type=checkbox name=toggle id=theme-switcher-indicator aria-label="Switch theme" @click=theme.toggleChanged($event.target) checked>
<label for=theme-switcher-indicator><i></i></label>
<span></span></div></div><a href=#content id=skip-link class=skip-link @click.prevent=skipLink.skipToContent($refs.content) @click.away=skipLink.removeContentTabIndex($refs.content)>Skip to content</a>
<button @click=menu.toggle() class=hamburger-trigger>Menu<div class=hamburger-menu><div class=bar :class="{'animate': menu.hamburgerIsOpen()}"></div></div></button><nav :class="{'open': menu.isOpen() || menu.isOpening(), 'open closing': menu.isClosing()}"><a href=/ class=home><svg class="icon icon-home"><use xlink:href="#icon-home"/></svg>首页</a>
<a href=/about/ class=about><svg class="icon icon-user"><use xlink:href="#icon-user"/></svg>关于我</a>
<a href=/search-requires-javascript/ rel=nofollow class=search x-ref=searchMenuLink @click.prevent="menu.close(); search.open();$nextTick(() => $refs.searchInput.focus())"><svg class="icon icon-search"><use xlink:href="#icon-search"/></svg>搜索</a></nav></div></header><div class=body><div class=body-max-width><main id=content x-ref=content><article class=full-article><h1>读[GO语言编程]</h1><div class=entry-meta><time class=published datetime="2021-05-25 09:34:28 +0800 +0800"><svg class="icon icon-calendar"><use xlink:href="#icon-calendar"/></svg>2021 May 25</time></div><div style=text-align:center;display:block;color:#999><div>本文仅为个人笔记,作为学习使用,如有雷同请联系作者 mingzi.li 处理,mail: qiaomingzi100@sina.com</div></div><h3 id=相关链接>相关链接</h3><pre><code>https://github.com/golang 源码
https://golang.org/ref/mod 官方文档
https://golang.org/doc/code.html#Workspaces

http://www.flysnow.org/categories/Golang/ go专栏
https://golanglibs.com/top  流行的GO应用和GO库

https://gitee.com/pengzhile/ide-eval-resetterv  GoLand试用更新插件
</code></pre><h2 id=一前言>一：前言</h2><h4 id=为什么需要go语言>为什么需要GO语言</h4><p>Go设计者认为C语言更值得学习，希望让它成为互联网时代的C语言。多数系统级语言（包括Java和C#）的根本编程哲学来源于C++，将C++的面向对象进一步发扬光大。C语言经久不衰的根源是它足够简单，Go语言也要足够简单。</p><h4 id=那么go需要关注哪些问题>那么GO需要关注哪些问题</h4><ul><li><p>与分布式支持</p><p><strong>并发执行体</strong>：多核化和集群化是互联网时代的典型特征，操作系统自己掌管的进程（process）、进程内的线程（thread）以及进程内的协程（goroutine，也叫轻量级线程）。Go语言在语言级别支持协程，叫goroutine。Go语言准库提供的所有系统调用（syscall）操作，当然也包括所有同步IO操作，都会出让CPU给其他goroutine</p><p><strong>执行体间的通信</strong>：</p><p>1）执行体之间的互斥与同步，互斥与同步是执行体间最基础
的交互方式。多数语言在库层面提供了线程间的互斥与同步支持，并没有提供协程之间的互斥与同步。</p><p>2）执行体之间的消息传递，在并发编程模型的选择上，一个是共享内存模型，一个是消息传递模型。多数传统语言选择了前者；Go语言推荐采用“Erlang风格的并发模型”的编程范式，尽管传统的“共享内存模型”仍然
被保留，在Go语言中内置了通道（channel）支持。两个goroutine之间可以通过通道来进行交互。</p></li><li><p>软件工程支持</p><p>随着工程规模的不断扩大,人们需要建立统一的交互语言来降低沟通的成本。规范化体现在多
个层面，</p><p><strong>1)代码风格规范</strong></p><p>Go语言要求public的变量必须以大写字母开头，private变量则以小写字母开头，这种做法不仅免除public、private关键字，更重要的是统一了命名风格。</p><p>Go语言对{ }应该怎么写进行了强制，Go代码的花括号位置肯定是非常统一的。</p><pre><code>正例:
if expression {
...
}
反例:
if expression
{
...
}
</code></pre><p><strong>2)错误处理规范</strong></p><p>Go语言的函数允许返回多个值。大多数函数的最后一个返回值会为error类型，以在错误情况下返回详细信息。</p><p>Go 语言首创的错误处理规范：</p><pre><code>f, err := os.Open(filename)
if err != nil {
log.Println(&quot;Open file failed:&quot;, err)
return
}
defer f.Close()
... // 操作已经打开的f文件

在Java中：
try {
  Statement stmt = ...;
  try {
    ResultSet rset = ...;
    try {
      ... // 正常代码
    }finally {
      rset.close();
    }
  }finally {
    stmt.close();
  }
}finally {
  conn.close();
}

GO中：
conn := ...
defer conn.Close()
stmt := ...
defer stmt.Close()
rset := ...
defer rset.Close()
... // 正常代码
</code></pre><p><strong>3)包管理</strong>
<strong>4)契约规范（接口）</strong>
<strong>5)单元测试规范</strong>
<strong>6)功能开发的流程规范</strong></p></li><li><p>编程哲学重塑</p><p>计算机软件经历了数十年的发展，形成了多种学术流派，有面向过程编程、面向对象编程、函数式编程、面向消息编程。</p></li></ul><p>而Go语言用批判吸收的眼光，将所有编程思想做了一次梳理，融合众家之长，但时刻警惕特性复杂化，极力维持语言特性的简洁，力求小而精。从编程范式的角度来说，Go语言是变革派，而不是改良派。对于C++、Java和C#等语言为代表的面向对象（OO）思想体系，Go语言总体来说持保守态度，有限吸收，本着“如果一个特性并不对解决任何问题有显著的价值，那么Go就不提供它”的原则</p><h2 id=二初识go语言>二：初识GO语言</h2><p>GO相关书籍：《GO并发编程实战 第2版》《<strong>Go****语言核心编程</strong>》《Go语言高级编程》《Go Web编程》</p><h4 id=贝尔实验室>贝尔实验室：</h4><p>​ 贝尔实验室已经走出了多位诺贝尔奖获得者，一些对于现在科技至关重要的研究成果，比如晶体管、通信技术、数码相机的感光元件CCD和光电池等都源自贝尔实验室。贝尔实验室中一个叫计算科学研究中心的部门，回溯至1969年，肯·汤普逊（Ken Thompson）和丹尼斯·里奇（Dennis Ritchie）在贝尔实验室的计算科学研究中心里开发出了Unix这个大名鼎鼎的操作系统，还因为开发Unix而衍生出了一门同样赫赫有名的编程语言——C语言。</p><p>​ 包括90年代如日中天的太阳微系统（Sun MicroSystems），现在的Mac OS X操作系统其实也可以认为是Unix
的一个变种（FreeBSD）。</p><p>​ 从20世纪80年代又开始了一个名为Plan 9的操作系统研究项目，目的就是解决Unix中的一些问题，发展出一个Unix的后续替代系统。在之后的几十年中，该研究项目又演变出了另一个叫Inferno的项目分支，以及一个名为Limbo的编程语言。</p><p>​ Limbo是用于开发运行在小型计算机上的分布式应用的编程语言，它支持模块化编程，编译期和运行时的强类型检查，进程内基于具有类型的通信通道，原子性垃圾收集和简单的抽象数据类型。它被设计为：即便是在没有硬件内存保护的小型设备上，也能安全运行。Limbo语言被认为是Go语言的前身，不仅仅因为是同一批人设计的语言，而是Go语言确实从Limbo语言中继承了众多优秀的特性。</p><h4 id=go语言的前身>Go语言的前身</h4><p>​ Limbo语言被认为是Go语言的前身,Limbo语言中继承了众多优秀的特性。贝尔实验室后来经历了多次的动荡，包括肯·汤普逊在内的Plan 9项目原班人马加入了Google。在Google，他们创造了Go语言。Go语言的第一个版本在2009年11月正式对外发布，并在此后的两年内快速迭代，发展迅猛。第一个正式版本于2012年3月28日正式发布，并使用BSD授权协议进行了开源。</p><p>​ 基于Google对开源的一贯拥抱态度， Go语言也自然而然地选择了开源方式发布，并使用BSD授权协议。任何人可以查看Go语言的所有源代码，并可以为Go语言发展而奉献自己的力量。Google作为Go语言的主推者，在自家的服务中逐步增加对Go语言的支持，比如云计算平台GAE（Google AppEngine）很早就开始支持Go语言了。</p><h3 id=1go语言最主要的特性>1.Go语言最主要的特性</h3><p>Go语言作为一门全新的静态类型开发语言，主要特性如下：</p><h4 id=1自动垃圾回收><strong>1)自动垃圾回收</strong></h4><pre><code>void foo()
{
char* p = new char[128];
... // 对p指向的内存块进行赋值
func1(p); // 使用内存指针
delete[] p;
}
</code></pre><p>​ C和C++语言在非常长的时间内都作为服务端系统的主要开发语言，然而，内存和资源管理一直是一个让人非常抓狂的难题。服务器的崩溃十有八九就是因为不正确的内存和资源管理导致，更讨厌的是这种内存和资源管理问题即使被发现了，也很难定位到具体的错误地点，导致无数程序员通宵达旦地调试程序。</p><p>​ 手动管理内存的另外一个问题就是由于指针的到处传递而无法确定何时可以释放该指针所指向的内存块。假如代码中某个位置释放了内存，而另一些地方还在使用指向这块内存的指针，那么这些指针就变成了所谓的“野指针”（wild pointer）或者“悬空指针”（dangling pointer），对这些指针进行的任何读写操作都会导致不可预料的后果。</p><p>​ 由于这个问题导致后面除了一些非常著名的内存检查工具，比如Rational Purify、Compuware BoundsChecker和英特尔的Parallel Inspector等。到目前为止，内存泄露的最佳解决方案是在语言级别引入自动垃圾回收算法（Garbage Collection，简称GC）所谓垃圾回收，</p><p>​ Go语言作为一门新生的开发语言，当然不能忽略内存管理这个问题。 因此Go语言中不需要delete关键字，也不需要free()方法来明确释放内存如果使用Go语言实现，我们就完全不用考虑何时需要释放之前分配的内存的问题，系统会自动帮我们判断，并在合适的时候（比如CPU相对空闲的时候）进行自动垃圾收集工作。</p><h4 id=2更丰富的内置类型><strong>2)更丰富的内置类型</strong></h4><p><strong>引用类型</strong>：切片、字典、数组、通道、函数</p><p><strong>值类型</strong>：数组、基础数据类型、结构体</p><h4 id=3函数多返回值><strong>3)函数多返回值</strong></h4><p>目前的主流语言中除Python外基本都不支持函数的多返回值功能；Go语言革命性地在静态开发语言阵营中率先提供了多返回值功能。
func 函数名(参数列表)(返回值列表) {
// 函数体
}</p><p>并不是每一个返回值都必须赋值，可以直接用下划线作为占位符来忽略其他不关心的返回值。
_, _, lastName, _ := getName()</p><h4 id=4错误处理><strong>4)错误处理</strong></h4><p>Go语言引入了3个关键字defer、panic和recover 用于标准的错误处理流程。Go语言的错误处理机制可以大量减少代码量，让开发者无需仅仅为了程序安全性而添加大量一层套一层的try-catch语句。</p><h4 id=5匿名函数和闭包><strong>5)匿名函数和闭包</strong></h4><p>在Go语言中，所有的函数也是值类型，可以作为参数传递。</p><h4 id=6类型和接口><strong>6)类型和接口</strong></h4><p>Go语言的类型定义非常接近于C语言中的结构（struct），甚至直接沿用了struct关键字。相并C++和Java，没有直接沿袭传统去设计一个超级复杂的类型系统，不支持继承和重载，而只是支持了最基本的类型组合功能。</p><p>Go语言也不是简单的对面向对象开发语言做减法，它还引入了一个无比强大的“非侵入式”接口的概念，让开发者从以往对C++和Java开发中的接口管理问题中解脱出来。</p><h4 id=7并发编程><strong>7)并发编程</strong></h4><p>Go语言引入了goroutine概念，通过在函数调用前使用关键字go，我们即可让该函数以goroutine方式执行。goroutine是一种比线程更加轻盈、更省资源的协程。Go语言通过系统的线程来多路派遣这些函数的执行，使得
每个用go关键字执行的函数可以运行成为一个单位协程。而且调度的开销非常小，一颗CPU调度的规模不下于每秒百万次，这使得我们能够创建大量的goroutine。
Go语言实现了CSP（通信顺序进程，Communicating Sequential Process）模型来作为goroutine间的推荐通信方式。在CSP模型中，进程之间只能通过一对通信原语实现协作。Go语言用channel（通道）这个概念来轻巧地实现了CSP模型。channel的使用方式比较接近Unix系统中的管道（pipe）概念，可以方便地进行跨goroutine的通信。
一个进程内创建的所有goroutine运行在同一个内存地址空间中，如果需要访问共享的内存变量，可以通过Go语言标准库中的sync包提供了完备的读写锁功能来访问。</p><h4 id=8反射><strong>8)反射</strong></h4><p>​ 反射（reflection）是在Java语言出现后迅速流行起来的一种概念。通过反射，你可以获取对象类型的详细信息，并可动态操作对象。反射是把双刃剑，功能强大但代码可读性并不理想。若非必要，我们并不推荐使用反射。
​ Go语言的反射实现了反射的大部分功能，但不能通过反射创建对象实例。在GO语言中反射最常见的使用场景是做对象的序列化（serialization，有时候也叫Marshal & Unmarshal）。例如，Go语言标准库的encoding/json、encoding/xml、encoding/gob、encoding/binary等包就大量
依赖于反射功能来实现。</p><h4 id=9语言交互性><strong>9)语言交互性</strong></h4><p>由于Go语言与C语言之间的天生联系，Go语言可以用通过Cgo重用现有C模块，Cgo既是语言特性，同时也是一个工具的名称。与Java中的JNI不同，Cgo的用法非常简单。</p><h3 id=2第一个go-程序>2.第一个Go 程序</h3><p>每个Go源代码文件的开头都是一个package声明，表示该Go代码所属的包。包是Go语言里最基本的分发单位，也是工程管理中依赖关系的体现。要生成Go可执行程序，必须建立一个名字为main的包，并且在该包中包含一个叫main()的函数（该函数是Go可执行程序的执行起点）。</p><pre><code>package main
import &quot;fmt&quot;// 我们需要使用fmt包中的Println()函数
func main() {
   fmt.Println(&quot;Hello, world. 你好，世界！&quot;)
}
</code></pre><ol><li><p>Go语言的main()函数不能带参数，也不能定义返回值。命令行传入的参数在os.Args变量中保存。如果需要支持命令行开关，可使用flag包。</p></li><li><p>Go程序的代码注释与C++保持一致：</p></li></ol><pre><code>/*
块注释
*/

// 行注释
</code></pre><ol start=3><li>不得包含在源代码文件中没有用到的包，否则Go编译器会报编译错误。</li><li>强制左花括号{的放置位置,如果把左花括号{另起一行放置，这样做的结果是Go编译器报告编译错。
5)Go程序并不要求开发者在每个语句后面加上分号表示语句结束。
6)一个常规的函数定义包含以下部分：</li></ol><pre><code>func 函数名(参数列表)(返回值列表) {
// 函数体
}
</code></pre><h3 id=2编译程序>2.编译程序</h3><pre><code>Go命令行工具只是一个源代码管理工具，或者说是一个前端。真正的Go编译器和链接器被Go命令行工具隐藏在后面，我们可以直接使用它们：
$ 6g helloworld.go
$ 6l helloworld.6
$ ./6.out
Hello, world. 你好，世界！
6g和6l是64位版本的Go编译器和链接器，对应的32位版本工具为8g和8l。Go还有另外一个
GCC版本的编译器，名为 gccgo。

构建
GOPATH和PATH环境变量一样，也可以接受多个路径，并且路径和路径之间用冒号分割
go build calc
gdb calc

go test simplemath

带参数运行
go run ./src/qiaomingzi.github.io/base/fmt1/main.go -age=11 -name=limingzi
</code></pre><h3 id=3开发工具>3.开发工具</h3><p> 文本编辑工具gedit（Linux）/Notepad++（Windows）/Fraise（Mac OS X）；
 安装了GoClipse插件的Eclipse，集成性做得很好；
 Vim/Emacs，万能开发工具；
 LiteIDE，一款专为Go语言开发的集成开发环境
 goland 非免费
 VScode</p><h3 id=4工程管理>4.工程管理</h3><p>早期Go语言使用makefile作为临时方案，到了Go 1发布时引入了强大无比的Go命令行工具。Go命令行工具的革命性之处在于彻底消除了工程文件的概念，完全用目录结构和包名来推导工程结构和构建顺序。</p><p>​ Go语言所提供的是尽量简单的语法和尽量完善的库，以尽可能降低问题的发生概率，还可以用打印日志和使用GDB进行逐步调试。</p><p>​ GDB调试：Go语言编译的二进制程序直接支持GDB调试，比如用go build calc编译出来的可执行文件calc，就可以直接用以下命令以调试模式运行：
$ gdb calc</p><h2 id=三顺序编程>三：顺序编程</h2><p>Go语言是不折不扣的强类型语言（静态类型语言）。Go语言为什么会被称为“更好的C语言”！！！</p><p>同Go语言的其他符号（symbol）一样，以大写字母开头的常量在包外可见。</p><h3 id=1变量>1.变量</h3><pre><code>1. 变量申明
var v1 int
var v2 string
var v3 [10]int // 数组
var v4 []int // 数组切片
var v5 struct {
   f int
}
var v6 *int // 指针
var v7 map[string]int // 字典map，key为string类型，value为int类型
var v8 func(a int) int //函数
var (
   v1 int
   v2 string
)
变量声明语句不需要使用分号作为结束符。

2. 变量初始化
var v1 int = 10 // 正确的使用方式1
var v2 = 10 // 正确的使用方式2，编译器可以自动推导出v2的类型
v3 := 10 // 正确的使用方式3，编译器可以自动推导出v3的类型

3.变量赋值
var v10 int
v10 = 123

多重赋值功能，如下面这个交换i和j变量的语句：
i, j = j, i   &lt;= 其他语言需要中间变量：t = i; i = j; j = t;

4.匿名变量
func GetName() (firstName, lastName, nickName string) {
  return &quot;May&quot;, &quot;Chan&quot;, &quot;Chibi Maruko&quot;
}
若只想获得nickName，可以使用_下划线屏蔽不相关返回值，则函数调用语句可以用如下方式编写：
_, _, nickName := GetName()
</code></pre><h3 id=3常量>3.常量</h3><p>在Go语言中，常量是指编译期间就已知且不可改变的值。常量可以是数值类型（包括整型、浮点型和复数类型）、布尔类型、字符串类型等。</p><p>如：-12在C语言中会认为是一个int类型的常量，如果要指定一个值为-12的long类型常量，需要写成-12l。Go语言
的字面常量更接近我们自然语言中的常量概念，它是无类型的。只要这个常量在相应类型的值域范围内，就可以作为该类型的常量，比如上面的常量-12，它可以赋值给int、uint、int32、int64、float32、float64、complex64、complex128等类型的变量。</p><p>常量的赋值是一个编译期行为，所以右值不能出现任何需要运行期才能得出结果的表达式</p><pre><code>1).常量定义
const Pi float64 = 3.14159265358979323846
const zero = 0.0 // 无类型浮点常量
const (
size int64 = 1024
eof = -1 // 无类型整型常量
)
const u, v float32 = 0, 3 // u = 0.0, v = 3.0，常量的多重赋值
const a, b, c = 3, 4, &quot;foo&quot;
// a = 3, b = 4, c = &quot;foo&quot;, 无类型整型和字符串常量

const mask = 1 &lt;&lt; 3 //在编译期运算的常量表达式

2)预定义常量
Go语言预定义了这些常量：true、false和iota。
iota比较特殊，可以被认为是一个可被编译器修改的常量，在每一个const关键字出现时被重置为0，然后在下一个const出现之前，每出现一次iota，其所代表的数字会自动增1。

const ( // iota被重设为0
c0 = iota // c0 == 0
c1 = iota // c1 == 1
c2 = iota // c2 == 2
)

const ( // iota被重设为0，如果两个const的赋值语句的表达式是一样的，那么可以省略后一个赋值表达式
c0 = iota // c0 == 0
c1 // c1 == 1
c2 // c2 == 2
)

const x = iota // x == 0 (因为iota又被重设为0了)
const y = iota // y == 0 (同上)

3）枚举
const (
Sunday = iota
Monday
Tuesday
Wednesday
Thursday
Friday
Saturday
numberOfDays // 这个常量没有导出
)
</code></pre><h3 id=4类型>4.类型</h3><p>Go语言内置以下这些基础类型：</p><blockquote><p>布尔类型：bool。
整型：int8、byte、int16、>int、uint、uintptr等。
浮点类型：float32、float64。
复数类型：complex64、complex128。
字符串：string。
字符类型：rune。
错误类型：error。</p></blockquote><p>此外，Go语言也支持以下这些复合类型：</p><blockquote><p>指针（pointer）
数组（array）
切片（slice）
字典（map）
通道（chan）
结构体（struct）
接口（interface）</p></blockquote><p><strong>类型表示</strong></p><p>在做强制类型转换时，需要注意数据长度被截短而发生的数据精度损失（比如将浮点数强制转为整数）和值溢出（值超过转换的目标类型的值范围时）问题。</p><pre><code>var value2 int32
value1 := 64 // value1将会被自动推导为int类型
value2 = int32(value1) // 编译通过
value2 = value1 // 编译错误 ，int和int32在Go语言里被认为是两种不同的类型，编译器也不会帮你自动
做类型转换
</code></pre><p><strong>数值运算</strong></p><p>Go语言支持下面的常规整数运算：+、-、*、/和%</p><p><strong>比较运算</strong></p><p>Go语言支持以下的几种比较运算符：>、&lt;、==、>=、&lt;=和!=</p><pre><code>两个不同类型的整型数不能直接比较，比如int8类型的数和int类型的数不能直接比较，但各种类型的整型变量都可以直接与字面常量（literal）进行比较，比如：

var i int32
var j int64
i, j = 1, 2
if i == j { // 编译错误
fmt.Println(&quot;i and j are equal.&quot;)
}
if i == 1 || j == 2 { // 编译通过
fmt.Println(&quot;i and j are equal.&quot;)
}
</code></pre><p><strong>位运算</strong></p><p><img src=E:/workspace/limzWorkspace/limz-blog-hugo/content/article/%E8%AF%BB%E4%B9%A6/GO%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/images/gyybc_1.png alt></p><h4 id=1布尔类型>1)布尔类型</h4><p>布尔类型不能接受其他类型的赋值，不支持自动或强制的类型转换</p><pre><code>var v1 bool
v1 = true
v2 := (1 == 2) // v2也会被推导为bool类型
</code></pre><h4 id=2整型>2)整型</h4><p><img src=./images/gyybc_0.png alt></p><h4 id=3浮点型><strong>3)浮点型</strong></h4><p>浮点型用于表示包含小数点的数据，Go语言中的浮点类型采用IEEE-754标准的表达方式。Go语言定义了两个类型float32和float64，其中float32等价于C语言的float类型，float64等价于C语言的double类型</p><p>浮点数不是一种精确的表达方式，所以像整型那样直接用==来判断两个浮点数是否相等是不可行的，这可能会导致不稳定的结果。</p><pre><code>var fvalue1 float32
fvalue1 = 12
fvalue2 := 12.0 // 如果不加小数点，fvalue2会被推导为整型而不是浮点型
fvalue1 = float32(fvalue2) //强制类型转换
</code></pre><h4 id=4复数><strong>4)复数</strong></h4><p>复数实际上由两个实数（在计算机中用浮点数表示）构成，一个表示实部（real），一个表示虚部（imag），对于一个复数z = complex(x, y)，就可以通过Go语言内置函数real(z)获得该复数的实
部，也就是x，通过imag(z)获得该复数的虚部，也就是y。</p><pre><code>var value1 complex64 // 由2个float32构成的复数类型
value1 = 3.2 + 12i
value2 := 3.2 + 12i // value2是complex128类型
value3 := complex(3.2, 12) // value3结果同 value2
</code></pre><h4 id=5字符串><strong>5)字符串</strong></h4><p>在Go语言中，字符串也是一种基本类型。相比之下， C/C++语言中并不存在原生的字符串类型，通常使用字符数组来表示，并以字符指针来传递。Go语言仅支持UTF-8和Unicode编码。</p><pre><code>var str string // 声明一个字符串变量
str = &quot;Hello world&quot; // 字符串赋值
ch := str[0] // 取字符串的第一个字符
fmt.Printf(&quot;The length of \&quot;%s\&quot; is %d \n&quot;, str, len(str))
fmt.Printf(&quot;The first character of \&quot;%s\&quot; is %c.\n&quot;, str, ch)

//字符串的内容可以用类似于数组下标的方式获取，但与数组不同，字符串的内容不能在初始化后被修改 
str := &quot;Hello world&quot; // 字符串也支持声明时进行初始化的做法
str[0] = 'X' // 编译错误
</code></pre><h4 id=6字符类型><strong>6)字符类型</strong></h4><p>在Go语言中支持两个字符类型，一个是byte（实际上是uint8的别名），代表UTF-8字符串的单个字节的值；另一个是rune，代表单个Unicode字符。出于简化语言的考虑，Go语言的多数API都假设字符串为UTF-8编码。尽管Unicode字符在标准库中有支持，但实际上较少使用。</p><h4 id=7数组><strong>7)数组</strong></h4><p>数组就是指一系列同一类型数据的集合。在Go语言中，数组长度在定义后就不可更改。</p><p>在Go语言中数组是一个值类型（value type）。所有的值类型变量在赋值和作为参数传递时都将产生一次复制动作。</p><pre><code>[32]byte // 长度为32的数组，每个元素为一个字节
[2*N] struct { x, y int32 } // 复杂类型数组
[1000]*float64 // 指针数组
[3][5]int // 二维数组
[2][2][2]float64 // 等同于[2]([2]([2]float64))
</code></pre><h4 id=8数组切片><strong>8)数组切片</strong></h4><p>数组切片的数据结构可以抽象为以下3个变量：</p><ul><li><p>一个指向原生数组的指针；</p></li><li><p>数组切片中的元素个数 len(slice)</p></li><li><p>数组切片已分配的存储空间。cap(slice)</p></li></ul><pre><code>基于数组创建数组切片
var myArray [10]int = [10]int{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
var mySlice []int = myArray[:5]

直接创建
mySlice1 := make([]int, 5) //创建一个初始元素个数为5的数组切片，元素初始值为0
mySlice2 := make([]int, 5, 10)//创建一个初始元素个数为5的数组切片，元素初始值为0，并预留10个元素的存储空间
mySlice3 := []int{1, 2, 3, 4, 5} //直接创建并初始化包含5个元素的数组切片

动态增减元素
mySlice := make([]int, 5, 10)
mySlice = append(mySlice, 1, 2, 3)

mySlice2 := []int{8, 9, 10}
mySlice = append(mySlice, mySlice2...)// 给mySlice后面添加另一个数组切片

基于数组切片创建数组切片
oldSlice := []int{1, 2, 3, 4, 5}
newSlice := oldSlice[:3] // 基于oldSlice的前3个元素构建新数组切片

内容复制
slice1 := []int{1, 2, 3, 4, 5}
slice2 := []int{5, 4, 3}
copy(slice2, slice1) // 只会复制slice1的前3个元素到slice2中
copy(slice1, slice2) // 只会复制slice2的3个元素到slice1的前3个位置
</code></pre><p><strong>9)map字典</strong></p><p>map是一堆键值对的未排序集合。在C++/Java中，map一般都以库的方式提供，比如在C++中是STL std::map&lt;>，在C#中是Dictionary&lt;>，在Java中是Hashmap&lt;>，在这些语言中，如果要使用map，事先要引用相应的库。而在Go中，使用map不需要引入任何库</p><h2 id=四面向对象编程>四：面向对象编程</h2><p>Go语言初始定位为高并发的服务器端程序，因此不太适合开发GUI程序</p><h2 id=五并发编程>五：并发编程</h2><h2 id=六网络编程>六：网络编程</h2><h2 id=七进阶话题>七：进阶话题</h2><h2 id=八安全编程>八：安全编程</h2><p>PKI，全称公钥基础设施，是使用非对称加密理论，提供数字签名、加密、数字证书等服务的体系。</p><p>数字签名，是指用于标记数字文件拥有者、创造者、分发者身份的字符串。数字签名拥有标记文件身份、分发的不可抵赖性等作用。</p><h4 id=数据加密>数据加密</h4><p>采用单密钥的加密算法，我们称为对称加密。整个系统由如下几部分构成：需要加密的明文、加密算法和密钥。在加密和解密中，使用的密钥只有一个。常见的单密钥加密算法有DES、AES、RC4等。</p><p>采用双密钥的加密算法，我们称为非对称加密。整个系统由如下几个部分构成：需要加密的明文、加密算法、私钥和公钥。在该系统中，私钥和公钥都可以被用作加密或者解密，但是用私钥加密的明文，必须要用对应的公钥解密，用公钥加密的明文，必须用对应的私钥解密。常见的双密钥加密算法有RSA等。</p><p>哈希算法是一种从任意数据中创建固定长度摘要信息的办法。一般我们要求，对于不同的数据，要求产生的摘要信息也是唯一的。常见的哈希算法包括MD5、SHA-1等。</p><h2 id=九工程管理>九：工程管理</h2><p>Go语言在设计之初就考虑了在语言层面如何更好地解决当前工程管理中的一些常见问题，让学习者在学习语言阶段自然而然地养成了工程的习惯，避免出现学院派和工程派两种明显不同的侧重点。</p><p>任何一门程序设计语言要能推广开来并投入到生产环境中，高效、易用、有好的开发环境都是必不可少的。</p><h4 id=1代码风格>1.代码风格</h4><p>“代码必须是本着写给人阅读的原则来编写，只不过顺便给机器执行而已。”，代码风格，是一个与人相关、与机器无关的问题。代码风格的好坏，不影响编译器的工作，但是影响团队协同，影响代码的复用、演进以及缺陷修复。</p><h5 id=强制性编码规范>强制性编码规范</h5><p>1)任何需要对外暴露的名字必须以大写字母开头，不需要对外暴露的则应该以小写字母开头。</p><p>2)而Go语言明确宣告了拥护骆驼命名法而排斥下划线法</p><p>3)花括号位置问题</p><pre><code>反例：
func Foo(a, b int)（ret int, err error） 
{
    ....doSomthing..
}
正例：
func Foo(a, b int)（ret int, err error） {
}
</code></pre><h5 id=非强制性编码风格建议>非强制性编码风格建议</h5><p>使用自带工具格式化代码</p><p><code>go fmt [packages]</code> 如：go fmt hello.go`</p><h5 id=import远程包>import远程包</h5><pre><code>package main
import (
&quot;fmt&quot;
&quot;github.com/myteam/exp/crc32&quot;
)
拉取依赖 
go get github.com/myteam/exp/crc32
 
go工具会自动帮你获取位于远程的包源码，远程包 github.com/myteam/exp/crc32只是一个与fmt无异的本地路径而已。在随后的编译中，也会在pkg目录中生成对应的.a文件。
</code></pre><h4 id=工程结构>工程结构</h4><pre><code>&lt;calcproj&gt;
	├─README
	├─AUTHORS
	├─&lt;bin&gt;
		├─calc
	├─&lt;pkg&gt;
		└─&lt;linux_amd64&gt;
			└─simplemath.a
	├─&lt;src&gt;
		├─&lt;calc&gt;
			└─calc.go
		├─&lt;simplemath&gt;
			├─add.go
			├─add_test.go
			├─sqrt.go
			├─sqrt_test.go
</code></pre><h4 id=工程文档>工程文档</h4><p>程序，包括代码和文档。而软件产品，更是包括了：源代码（可选）、可执行程序、文档和服务。</p><p>若要让<code>go doc</code>将注释提取为文档，要遵守如下的基本规则:</p><ol><li>注释需要紧贴在对应的包声明和函数之前，不能有空行。</li><li>注释如果要新起一个段落，应该用一个空白注释行隔开，因为直接换行书写会被认为是正常的段内折行。</li><li>开发者可以直接在代码内用// BUG(author): 的方式记录该代码片段中的遗留问题，这些遗留问题也会被抽取到文档中。</li></ol><pre><code>$ go doc [pacakge]   #提取包中的注释内容，并将其格式化输出到终端窗口
$ godoc -http=:76 -path=&quot;.&quot;  #然后再访问http://localhost:76/就可以看到注释提取的效果
</code></pre><h4 id=工程构建>工程构建</h4><pre><code>$ go build calc   #它会在你运行该命令的目录中生成工程的目标二进制文
$ go install calc   #将构建成功的包安装到恰当的位置
</code></pre><h4 id=跨平台开发>跨平台开发</h4><p>跨平台泛指同一段程序可在不同硬件架构和操作系统的设备上运行，对于个人电脑和服务器通常为80×86架构，移动设备则以ARM架构为主。根据CPU的寻址能力，CPU又分为不同的位数，比如8位、16位、32位、64位等。位数越高，寻址能力就越强。
程序的执行过程其实就是操作系统读取可执行文件的内容，依次调用相应CPU指令的过程。不同的操作系统所支持的可执行文件格式也各不相同，比如Windows支持PE格式，Linux支持ELF。</p><h5 id=交叉编译>交叉编译</h5><pre><code>在Linux平台下构建Windows 32位PE文件的详细步骤。
(1) 获取Go源代码。
(2) 构建本机编译器环境，具体代码如下：
$ cd $GOROOT/src
$ ./make.bash
(3) 构建跨平台的编译器和链接器，具体代码如下：
$ cat ~/bin/buildcmd
#!/bin/sh
set -e
for arch in 8 6; do
  for cmd in a c g l; do
    go tool dist install -v cmd/$arch$cmd
  done
done
exit 0

(4) 构建Windows版本的标准命令工具和库，如下：
$ cat ~/bin/buildpkg
#!/bin/sh
if [ -z &quot;$1&quot; ]; then
  echo 'GOOS is not specified' 1&gt;&amp;2
  exit 2
else
  export GOOS=$1
  if [ &quot;$GOOS&quot; = &quot;windows&quot; ]; then
    export CGO_ENABLED=0
  fi
fi
shift
if [ -n &quot;$1&quot; ]; then
  export GOARCH=$1
fi
cd $GOROOT/src
go tool dist install -v pkg/runtime
go install -v -a std

然后执行下面这段脚本以准备好Windows交叉编译的环境：
$ ~/bin/buildpkg windows 386

(5) 在Linux上生成Windows x86的PE文件，具体代码如下：
$ cat hello.go
package main
import &quot;fmt&quot;
func main() {
  fmt.Printf(&quot;Hello\n&quot;)
}

$ GOOS=windows GOARCH=386 go build -o hello.exe hello.go
</code></pre><h4 id=单元测试>单元测试</h4><p>Go本身提供了一套轻量级的测试框架。符合规则的测试代码会在运行测试时被自动识别并执行。</p><p>单元测试源文件的命名规则如下：在需要测试的包下面创建以“_test”结尾的go文件，形如[^.]<em>_test.go。
Go的单元测试函数分为两类：功能测试函数和性能测试函数，分别为以Test和Benchmark为函数名前缀并以</em>testing.T为单一参数的函数。下面是测试函数声明的例子：
func TestAdd1(t *testing.T)
func BenchmarkAdd1(t *testing.T)
测试结果：功能测试函数会根据测试代码执行过程中是否发生错误来返回不同的结果，而性能测试函数仅仅打印整个测试过程的花费时间。</p><h4 id=打包分发>打包分发</h4><p>由于Go语言对于兼容性控制的非常严格，任何一个版本号的不同都将导致无法链接包。因此，如果你使用Go语言开发了一个库，那么最合适的库分发方式是直接打包源代码包并进行分发，由使用者自行编译。</p><h2 id=十开发工具>十：开发工具</h2><p>如果有一个扩展性较好的文本编辑器，搭配上go工具和gdb，再链接上go文档，那么整套环境就与成熟的IDE极为相似了。如果再整合进Git，就更可以升华为一个协同开发平台。</p><h4 id=选择开发工具>选择开发工具</h4><p>作为一个理想的开发工具，我们可以设定对其的期望，具体如下：
 支持语法高亮的文本编辑
 支持Unicode编码，便于在代码中直接使用非英文字符串
 支持工程构建
 直接执行构建结果
 单元测试
 支持执行性能测试
 支持代码调试，包括断点和逐行调试等
 支持文档提取和展示
 集成语言文档
 开源，或者免费
 最好能够支持代码自动完成（在Visual Studio中称之为IntelliSense）</p><h4 id=参考工具>参考工具</h4><p>gedit、Vim、Eclipse、Notepad++、LiteIDE、goland</p><h2 id=附录>附录</h2><h3 id=1go标准库>1.Go标准库</h3><p>Go标准库可以大致按其中库的功能进行以下分类:</p><ul><li><p>输入输出。这个分类包括二进制以及文本格式在屏幕、键盘、文件以及其他设备上的输入输出等，比如二进制文件的读写。对应于此分类的包有bufio、fmt、io、log和flag等，其中flag用于处理命令行参数。</p></li><li><p>文本处理。这个分类包括字符串和文本内容的处理，比如字符编码转换等。对应于此分类的包有encoding、bytes、strings、strconv、text、mime、unicode、regexp、index和path等。其中path用于处理路径字符串。</p></li><li><p>网络。这个分类包括开发网络程序所需要的包，比如Socket编程和网站开发等。对应于此分类的包有：net、http和expvar等。</p></li><li><p>系统。这个分类包含对系统功能的封装，比如对操作系统的交互以及原子性操作等。对应于此分类的包有os、syscall、sync、time和unsafe等。</p></li><li><p>数据结构与算法。对应于此分类的包有math、sort、container、crypto、hash、archive、compress和image等。因为image包里提供的图像编解码都是算法，所以也归入此类。</p></li><li><p>运行时。对应于此分类的包有：runtime、reflect和go等。</p></li></ul><h3 id=2常用包>2.常用包</h3><p><strong>fmt</strong>。它实现了格式化的输入输出操作，其中的fmt.Printf()和fmt.Println()是开发者使用最为频繁的函数。</p><p><strong>io</strong>。它实现了一系列非平台相关的IO相关接口和实现，比如提供了对os中系统相关的IO功能的封装。我们在进行流式读写（比如读写文件）时，通常会用到该包。</p><p><strong>bufio</strong>。它在io的基础上提供了缓存功能。在具备了缓存功能后，bufio可以比较方便地提供ReadLine之类的操作。</p><p><strong>strconv</strong>。本包提供字符串与基本数据类型互转的能力。</p><p><strong>os</strong>。本包提供了对操作系统功能的非平台相关访问接口。接口为Unix风格。提供的功能包括文件操作、进程管理、信号和用户账号等。</p><p><strong>sync</strong>。它提供了基本的同步原语。在多个goroutine访问共享资源的时候，需要使用sync中提供的锁机制。</p><p><strong>flag</strong>。它提供命令行参数的规则定义和传入参数解析的功能。绝大部分的命令行程序都需要用到这个包。</p><p><strong>encoding/json</strong>。JSON目前广泛用做网络程序中的通信格式。本包提供了对JSON的基本支持，比如从一个对象序列化为JSON字符串，或者从JSON字符串反序列化出一个具体的对象等。</p><p><strong>http</strong>。它是一个强大而易用的包，也是Golang语言是一门“互联网语言”的最好佐证。通
过http包，只需要数行代码，即可实现一个爬虫或者一个Web服务器，这在传统语言中是无法想象的。</p><h3 id=3gotool命令>3.Gotool命令</h3><h4 id=31go命令行>3.1Go命令行</h4><pre><code>Usage:

	go &lt;command&gt; [arguments]

The commands are:

	bug         start a bug report
	build       compile packages and dependencies
	clean       remove object files and cached files
	doc         show documentation for package or symbol
	env         print Go environment information
	fix         update packages to use new APIs
	fmt         gofmt (reformat) package sources
	generate    generate Go files by processing source
	get         add dependencies to current module and install them
	install     compile and install packages and dependencies
	list        list packages or modules
	mod         module maintenance
	run         compile and run Go program
	test        test packages
	tool        run specified go tool
	version     print Go version
	vet         report likely mistakes in packages

Use &quot;go help &lt;command&gt;&quot; for more information about a command.

Additional help topics:

	buildconstraint build constraints
	buildmode       build modes
	c               calling between Go and C
	cache           build and test caching
	environment     environment variables
	filetype        file types
	go.mod          the go.mod file
	gopath          GOPATH environment variable
	gopath-get      legacy GOPATH go get
	goproxy         module proxy protocol
	importpath      import path syntax
	modules         modules, module versions, and more
	module-get      module-aware go get
	module-auth     module authentication using go.sum
	packages        package lists and patterns
	private         configuration for downloading non-public code
	testflag        testing flags
	testfunc        testing functions
	vcs             controlling version control with GOVCS
</code></pre><h4 id=32go-module>3.2Go Module</h4><p>gomod 包源码和链接库保存在 <code>$GOPATH/pkg/mod</code> 目录下。</p><pre><code> go list -u -m all 查看所有依赖
 go mod tidy  移除不需要的依赖
 go mod edit -fmt 格式化go.mod文件
 go mod edit --require=rsc.io/quote@v3.1.0  更新 rsc.io/quote 到 v3.1.0 版

</code></pre><h3 id=4go安装>4.GO安装</h3><pre><code>1. MSI installer(https://golang.org/dl/)

Open the MSI file and follow the prompts to install the Go tools. By default, the installer puts the Go distribution in c:\Go.

The installer should put the c:\Go\bin directory in your PATH environment variable. You may need to restart any open command prompts for the change to take effect.

Setting environment variables under Windows

Under Windows, you may set environment variables through the &quot;Environment Variables&quot; button on the &quot;Advanced&quot; tab of the &quot;System&quot; control panel. Some versions of Windows provide this control panel through the &quot;Advanced System Settings&quot; option inside the &quot;System&quot; control panel.

2. linux下安装

tar -C /usr/local -xzf go.tar.gz
Add /usr/local/go/bin to the PATH environment variable. You can do this by adding this line to your /etc/profile(for a system-wide installation) or $HOME/.profile:
export PATH=$PATH:/usr/local/go/bin


3. 自定义安装
The Go binary distributions assume they will be installed in /usr/local/go (or c:\Go under Windows), but it is possible to install the Go tools to a different location. In this case you must set the GOROOT environment variable to point to the directory in which it was installed. 
For example, if you installed Go to your home directory you should add commands like the following to $HOME/.profile: 
export GOROOT=$HOME/go1.X
export PATH=$PATH:$GOROOT/bin
 
4. 测试安装情况
Check that Go is installed correctly by setting up a workspace and building a simple program, as follows.

Create your workspace directory, %USERPROFILE%\go. (If you'd like to use a different directory, you will need to set the GOPATH environment variable; see How to Write Go Code for details.)

Next, make the directory src/hello inside your workspace, and in that directory create a file named hello.go that looks like:

package main

import &quot;fmt&quot;

func main() {
    fmt.Printf(&quot;hello, world\n&quot;)
}
Then build it with the go tool:

C:\&gt; cd %USERPROFILE%\go\src\hello
C:\Users\Gopher\go\src\hello&gt; go build
The command above will build an executable named hello.exe in the directory alongside your source code. Execute it to see the greeting:

C:\Users\Gopher\go\src\hello&gt; hello
hello, world
If you see the &quot;hello, world&quot; message then your Go installation is working.

You can run go install to install the binary into your workspace's bin directory or go clean to remove it.

Before rushing off to write Go code please read the How to Write Go Code document, which describes some essential concepts about using the Go tools.

5. 删除go
直接删除go的安装目录. 
/usr/local/go under Linux, Mac OS X, and FreeBSD 
 c:\Go under Windows.

删除环境变量配置
Under Linux and FreeBSD you should edit /etc/profile or $HOME/.profile.
 Mac OS X   you should remove the /etc/paths.d/go file.
 Windows users should read the section about setting environment variables under Windows.
</code></pre><h4 id=gopath-与goroot>GOPATH 与GOROOT</h4><pre><code>GOROOT
指定Go的二进制编译包安装路径，假设你把Go安装在 /usr/local/go (或者Window是 c:\Go)目录下。当然你也可以安装在其他目录下，不过这时候你就需要设置GOROOT环境变量了。 http://golang.org/doc/install#install 例如，你如果安装Go在你的/usr/local/go目录下，你应该$HOME/.profile文件增加下面设置。
export GOROOT=/usr/local/go
export GOPATH=$PATH:$GOROOT/bin
执行：source .bash_profile (即时生效)

GOPATH
GOPATH的作用是告诉Go命令和其他相关工具，在哪里去找到安装在你系统上的Go包。
GOPATH是一个路径的列表，一个典型的GOPATH设置如下，类似PATH的设置，Win下用分号分割：
GOPATH=/home/user/ext:/home/user/mygo 
每一个列表中的路径是一个工作区的位置。每个工作区都有源文件、相关包的对象、执行文件。http://golang.org/doc/code.html
下面是一个建立工作区的步骤：
创建 $HOME/mygo 目录和作为源代码的 src 目录。
$ mkdir -p $HOME/mygo/src # create a place to put source code 
下一步就是设置 GOPATH，另外你应该把 这个目录下的bin目录放在 PATH 环境变量，这样你就可以直接在命令行执行而不用给出完整目录。
export GOPATH=$HOME/mygo 
export PATH=$PATH:$HOME/mygo/bin

GOPATH 必须设置编译和安装包，即使用标准的Go目录树，类似如下：
GOPATH=/home/user/gocode
/home/user/gocode/
    src/
        foo/
            bar/               (go code in package bar)
                x.go
            quux/              (go code in package main)
                y.go
    bin/
        quux                   (installed command)
    pkg/
        linux_amd64/
            foo/
                bar.a          (installed package object)

</code></pre><h3 id=5fmt格式>5.fmt格式</h3><table><thead><tr><th>动 词</th><th>功 能</th></tr></thead><tbody><tr><td>%v</td><td>按值的本来值输出</td></tr><tr><td>%+v</td><td>在 %v 基础上，对结构体字段名和值进行展开</td></tr><tr><td>%#v</td><td>输出 Go 语言语法格式的值</td></tr><tr><td>%T</td><td>输出 Go 语言语法格式的类型和值</td></tr><tr><td>%%</td><td>输出 % 本体</td></tr><tr><td>%b</td><td>整型以二进制方式显示</td></tr><tr><td>%o</td><td>整型以八进制方式显示</td></tr><tr><td>%d</td><td>整型以十进制方式显示</td></tr><tr><td>%x</td><td>整型以十六进制方式显示</td></tr><tr><td>%X</td><td>整型以十六进制、字母大写方式显示</td></tr><tr><td>%U</td><td>Unicode 字符</td></tr><tr><td>%f</td><td>浮点数</td></tr><tr><td>%p</td><td>指针，十六进制方式显示</td></tr></tbody></table><h3 id=6相关问题>6.相关问题</h3><h4 id=1go-githubcomburntsushitomlv031-get-httpsproxygolangorggithubcom21burnt21sushitomlvv031mod-dial-tcp-17221716081443-connectex-a-connection-attempt-failed-because-the-connected-party-did-not-properly-respond-after-a-period-of-time-or-established-connection-failed-because-connected-host-has-failed-to-respond>1.go: <a href=mailto:github.com/BurntSushi/toml@v0.3.1>github.com/BurntSushi/toml@v0.3.1</a>: Get &ldquo;<a href=https://proxy.golang.org/github.com/%21burnt%21sushi/toml/@v/v0.3.1.mod%22:>https://proxy.golang.org/github.com/%21burnt%21sushi/toml/@v/v0.3.1.mod":</a> dial tcp 172.217.160.81:443: connectex: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.</h4><p>设置国内代理地址<code>go env -w GOPROXY=https://goproxy.cn</code></p><h4 id=2运行出错-failed-to-build-the-application-go-githubcomastaxiebeegov1121-missing-gosum-entry-to-add-it>2.运行出错 Failed to build the application: go: <a href=mailto:github.com/astaxie/beego@v1.12.1>github.com/astaxie/beego@v1.12.1</a>: missing go.sum entry; to add it:</h4><p>go mod tidy</p><footer><section class=categories-tags><span><svg class="icon icon-folder"><use xlink:href="#icon-folder"/></svg><span class=screen-reader-text>This entry was posted in</span>
<a href=/categories/%E5%90%8E%E7%AB%AF>后端</a></span> <span><svg class="icon icon-tag"><use xlink:href="#icon-tag"/></svg><a class=article-tags href=/tags/go>GO</a></span></section></footer><div id=comments-button-container class=comments-button-container><button type=button onclick=loadDisqus() class=comments-button><svg class="icon icon-bubble"><use xlink:href="#icon-bubble"/></svg> <span>Show Comments</span></button></div><div id=disqus_thread></div><script type=text/javascript>function loadDisqus(){var a,b;document.getElementById('comments-button-container').style.display='none',a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='李明梓',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)}</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><aside id=sidebar><div class=widget><div class=widget-title>Recent posts</div><ol class="recent-widget widget-content"><li><a href=/%E8%8B%B1%E8%AF%AD%E8%87%AA%E7%84%B6%E6%8B%BC%E8%AF%BB/>英语自然拼读</a></li><li><a href=/%E8%8B%B1%E8%AF%AD%E9%9F%B3%E8%8A%82%E5%88%92%E5%88%86/>英语音节划分</a></li><li><a href=/%E8%AF%BBgo%E8%AF%AD%E8%A8%80%E6%A0%B8%E5%BF%8336%E8%AE%B2/>读[GO语言核心36讲]</a></li><li><a href=/%E5%85%B3%E4%BA%8E%E8%B0%83%E9%9F%B3%E5%A3%B0%E5%8D%A1/>关于调音声卡</a></li><li><a href=/go-sdk/>GO SDK</a></li></ol></div><div class=widget><div class=widget-title>Categories</div><ol class="all-categories widget-content"><li><a href=/categories/devops>devops</a> (1)</li><li><a href=/categories/java>java</a> (4)</li><li><a href=/categories/mysql>mysql</a> (1)</li><li><a href=/categories/%E5%85%B6%E4%BB%96>其他</a> (5)</li><li><a href=/categories/%E5%89%8D%E7%AB%AF>前端</a> (1)</li><li><a href=/categories/%E5%90%8E%E7%AB%AF>后端</a> (4)</li><li><a href=/categories/%E5%9F%BA%E7%A1%80>基础</a> (1)</li><li><a href=/categories/%E5%B7%A5%E5%85%B7>工具</a> (3)</li><li><a href=/categories/%E8%8B%B1%E8%AF%AD>英语</a> (2)</li></ol></div><div class=widget><div class=widget-title>Tags</div><div class="tag-cloud-tags widget-content"><a href=/tags/canal aria-label="canal (2 posts)" style=font-size:1rem>canal</a>
<a href=/tags/git aria-label="git (1 posts)" style=font-size:1rem>git</a>
<a href=/tags/go aria-label="go (4 posts)" style=font-size:1rem>go</a>
<a href=/tags/hexo aria-label="hexo (1 posts)" style=font-size:1rem>hexo</a>
<a href=/tags/java aria-label="java (1 posts)" style=font-size:1rem>java</a>
<a href=/tags/maven aria-label="maven (1 posts)" style=font-size:1rem>maven</a>
<a href=/tags/mysql aria-label="mysql (1 posts)" style=font-size:1rem>mysql</a>
<a href=/tags/yarn aria-label="yarn (1 posts)" style=font-size:1rem>yarn</a>
<a href=/tags/zabbix aria-label="zabbix (1 posts)" style=font-size:1rem>zabbix</a>
<a href=/tags/%E5%9F%BA%E7%A1%80 aria-label="基础 (1 posts)" style=font-size:1rem>基础</a>
<a href=/tags/%E5%B7%A5%E5%85%B7 aria-label="工具 (2 posts)" style=font-size:1rem>工具</a>
<a href=/tags/%E6%8B%BC%E8%AF%BB aria-label="拼读 (1 posts)" style=font-size:1rem>拼读</a>
<a href=/tags/%E8%BD%AF%E6%96%87%E6%94%B6%E9%9B%86 aria-label="软文收集 (2 posts)" style=font-size:1rem>软文收集</a>
<a href=/tags/%E9%9F%B3%E8%8A%82 aria-label="音节 (1 posts)" style=font-size:1rem>音节</a></div></div></aside></div></div><svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="icon-github" viewBox="0 0 32 32"><path d="M16 .395c-8.836.0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182.8.148 1.094-.347 1.094-.77.0-.381-.015-1.642-.022-2.979-4.452.968-5.391-1.888-5.391-1.888-.728-1.849-1.776-2.341-1.776-2.341-1.452-.993.11-.973.11-.973 1.606.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33.143-1.034.558-1.74 1.016-2.14-3.554-.404-7.29-1.777-7.29-7.907.0-1.747.625-3.174 1.649-4.295-.166-.403-.714-2.03.155-4.234.0.0 1.344-.43 4.401 1.64 1.276-.355 2.645-.532 4.005-.539 1.359.006 2.729.184 4.008.539 3.054-2.07 4.395-1.64 4.395-1.64.871 2.204.323 3.831.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295.0 6.145-3.743 7.498-7.306 7.895.574.497 1.085 1.47 1.085 2.963.0 2.141-.019 3.864-.019 4.391.0.426.288.925 1.099.768C27.421 29.457 32 23.462 32 16.395c0-8.837-7.164-16-16-16z"/></symbol><symbol id="icon-arrow-with-circle-up" viewBox="0 0 32 32"><path d="M16 .64C7.515.64.638 7.517.638 16c0 8.485 6.877 15.362 15.362 15.362 8.482.0 15.36-6.877 15.36-15.362.0-8.483-6.878-15.36-15.36-15.36zM15.998 28.16c-6.715.0-12.16-5.443-12.16-12.16S9.281 3.84 15.998 3.84 28.16 9.285 28.16 16s-5.446 12.16-12.162 12.16zM16 8.8l7.2 7.2h-4v6.4h-6.4V16h-4L16 8.8z"/></symbol></defs></svg><footer id=page-footer><div class=footer-content><a href=https://github.com/qiaomingzi/limz-blog-hugo target=_blank rel=noopener title="Source Code for this Blog"><div class=footer-text><svg class="icon icon-github"><use xlink:href="#icon-github"/></svg>Blog code</div></a><a href=#page-wrapper title="Go to top" id=go-to-top-link><div class=footer-text>To top<svg class="icon icon-arrow-with-circle-up"><use xlink:href="#icon-arrow-with-circle-up"/></svg></div></a><script>document.getElementById("go-to-top-link").onclick=function(){return window.scroll(0,0),!1}</script></div></footer><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?245212315af876cae36fd6880abbfa41",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script></div><div id=lightbox-container :class="{'open': lightbox.isOpen, 'close': !lightbox.isOpen}"><button type=button aria-label="Close image modal" class=modal-close-button @click=lightbox.close()><svg class="icon icon-circle-with-cross"><use xlink:href="#icon-circle-with-cross"/></svg>
(ESC)</button><div id=lightbox-loading-container x-ref=lightboxLoadingContainer x-show=lightbox.showLoading><div id=lightbox-loading><div aria-busy=true aria-label="Loading, please wait." role=progressbar class=spinner @click=lightbox.cancel() @click.away=lightbox.cancel()></div></div></div><div id=lightbox x-ref=lightbox :class="{'open': lightbox.openImage, 'close': !lightbox.openImage}" @click=lightbox.close()></div></div><div id=code-container :class="{'open': code.isOpening, 'close': !code.isOpening}"><button class=modal-close-button><svg class="icon icon-circle-with-cross"><use xlink:href="#icon-circle-with-cross"/></svg>
(ESC)</button><div id=code-container-inner class=close :class="{'open': code.isOpening, 'close': !code.isOpening}"><div class=box-shadow-container @click.away=code.close()><div id=code-placeholder></div></div></div></div><div id=searchbox-container :class="{'open': search.isOpen}" x-show=search.isOpen x-on:keydown.escape="$nextTick(() => $refs.searchMenuLink.focus())"><button type=button aria-label="Close search modal" class=modal-close-button @click="search.close();$nextTick(() => $refs.searchMenuLink.focus())"><svg class="icon icon-circle-with-cross"><use xlink:href="#icon-circle-with-cross"/></svg>
(ESC)</button><div id=searchbox :class="{'open': search.isOpen}"><svg class="icon icon-search"><use xlink:href="#icon-search"/></svg><label for=search-input class=sr-only>Searchbox</label>
<input id=search-input type=search placeholder=Search... class=search-input x-ref=searchInput autocomplete=off autocorrect=off autocapitalize=off spellcheck=false x-model=search.textInSearchBox x-on:input=search.searchBoxChanged($event.target.value) x-on:keydown.enter="search.focusFirstAnchor($event, $refs.hits)" x-on:keydown.arrow-down="search.focusFirstAnchor($event, $refs.hits)"><svg class="icon icon-circle-with-cross close-search" role="button" aria-label="Close search" @click="search.close();$nextTick(() => $refs.searchMenuLink.focus())"><use xlink:href="#icon-circle-with-cross"/></svg></div><div class=search-results-container><div id=search-output x-show=search.textInSearchBox><div id=no-results-message x-show="search.store && search.textInSearchBox && !search.hits.length">No matching posts found. You can use wildcards and search only in titles, e.g. <code>title:iot</code></div><div id=index-loading-message x-show="!search.indexLoadFailed && search.indexLoading && search.textInSearchBox"><span class=icon-spinner aria-hidden=true></span>Loading search index, please wait...</div><div id=index-failed-message x-show="search.indexLoadFailed && search.textInSearchBox">Search index failed to download 😢</div><div id=number-of-hits-message x-text=search.getHitsText() x-show=search.hits.length></div><ol class=result-list x-show=search.hits.length x-ref=hits><template x-for="hit in search.hits" :key=hit.ref><li><h2><a :href=hit.ref x-text=search.fromStore(hit).title></a></h2><div class=entry-meta><time class=published :datetime=search.fromStore(hit).dateiso><svg class="icon icon-calendar"><use xlink:href="#icon-calendar"/></svg><span x-text=search.fromStore(hit).dateformatted></span></time></div><p x-text=search.fromStore(hit).summary></p></li></template></ol></div></div></div><script src=/bundle.326b2331e4a76c824b17b8d379095b25394912a8f7f1c8a6162a06f763a2caabe6226dee31773ec698c47b06f1de9bb7133091e9260d4d95b4011c7351300442.js integrity="sha512-MmsjMeSnbIJLF7jTeQlbJTlJEqj38cimFioG92OiyqvmIm3uMXc+xpjEewbx3pu3EzCR6SYNTZW0ARxzUTAEQg=="></script></body></html>